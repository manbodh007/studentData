(this.webpackJsonpreact_full_test=this.webpackJsonpreact_full_test||[]).push([[0],{29:function(e,t,n){e.exports=n(43)},34:function(e,t,n){},35:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),c=n.n(o),s=(n(34),n(7)),l=n(8),u=n(11),i=n(10),m=(n(35),n(9)),d=n(15),p="http://localhost:9000",h=function(){return"".concat(p,"/student/all")},g=function(){return"".concat(p,"/employees/log-in")},f=function(){return"".concat(p,"/employees/sign-up")};function v(e){var t=[];for(var n in e){var a=encodeURIComponent(n),r=encodeURIComponent(e[n]);t.push(a+"="+r)}return t.join("&")}function E(e){return function(t){var n=f();fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v(e)}).then((function(e){return e.json()})).then((function(e){console.log("new employees data",e),t({type:"SIGN_UP_SUCCESS",message:e.message})}))}}var b=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleLogOut=function(){localStorage.removeItem("token"),e.props.dispatch({type:"LOG_OUT"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.auth,t=e.isLoggedIn,n=(e.error,e.inProgress,e.user);return r.a.createElement("div",{className:"Navbar"},r.a.createElement("div",{className:"left-nav"},r.a.createElement("h1",null," Student Database")),0==t?r.a.createElement("div",{className:"right-nav"},r.a.createElement(d.b,{to:"/"},r.a.createElement("div",null,"Log-in")),r.a.createElement(d.b,{to:"/signup"},r.a.createElement("div",null,"Register"))):r.a.createElement("div",{className:"right-nav"},r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/145/145867.svg"}),r.a.createElement("span",null,n.name)),r.a.createElement("div",{onClick:this.handleLogOut},"log-out")))}}]),n}(a.Component),O=Object(m.b)((function(e){return{auth:e.auth}}))(b);var j=function(e){var t=e.student;return r.a.createElement("div",{className:"student"},r.a.createElement("div",{className:"student-info"},r.a.createElement("div",null,r.a.createElement("span",null,"Name"),r.a.createElement("span",null,t.name)),r.a.createElement("div",null,r.a.createElement("span",null,"Batch"),r.a.createElement("span",null,t.batch))),r.a.createElement("div",{className:"download"}))};var C=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.students;return r.a.createElement("div",{className:"student-list"},e.map((function(e){return r.a.createElement(j,{student:e})})))}}]),n}(a.Component),y=Object(m.b)((function(e){return{students:e.students}}))(C),S=n(27),N=n.n(S),_=n(16);var w=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleChange=function(e,t){a.setState(Object(_.a)({},e,t))},a.handleSubmitBtn=function(e){var t;e.preventDefault(),a.props.dispatch((t=a.state,function(e){e({type:"USER_LOGIN_START"});var n=g();fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v(t)}).then((function(e){return e.json()})).then((function(t){console.log("login data",t),t.success?(localStorage.setItem("token",t.token),e({type:"USER_LOGIN_SUCCESS"})):e({type:"USER_LOGIN_FAILED",message:t.message})}))}))},a.state={email:"",password:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"CLEAR_AUTH"})}},{key:"render",value:function(){var e=this,t=this.props.auth,n=t.error,a=t.inProgress;return r.a.createElement("form",{className:"form"},r.a.createElement("h2",null,"Log in"),n&&r.a.createElement("div",{className:"alert error-dailog"},n),r.a.createElement("input",{type:"email",name:"email",placeholder:"Enter Your Email",required:!0,onChange:function(t){e.handleChange("email",t.target.value)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",required:!0,onChange:function(t){e.handleChange("password",t.target.value)}}),r.a.createElement("button",{className:"login-btn",onClick:this.handleSubmitBtn,disabled:a},"Log in"))}}]),n}(a.Component),I=Object(m.b)((function(e){return{auth:e.auth}}))(w),L=n(2);var U=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleSignup=function(e){e.preventDefault(),a.props.dispatch(E(a.state))},a.handleChange=function(e,t){a.setState(Object(_.a)({},e,t))},a.state={email:"",name:"",password:"",confrimPassword:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"CLEAR_AUTH"})}},{key:"render",value:function(){var e=this,t=this.props.auth,n=t.isLoggedIn,a=t.error;return n?r.a.createElement(L.a,{to:"/"}):r.a.createElement("form",{className:"form"},r.a.createElement("h2",null,"Register Here"),a&&r.a.createElement("div",{className:"alert error-dailog"},a),r.a.createElement("input",{type:"email",name:"email",placeholder:"Enter Your Email",required:!0,onChange:function(t){e.handleChange("email",t.target.value)}}),r.a.createElement("input",{type:"name",name:"text",placeholder:"Name",required:!0,onChange:function(t){e.handleChange("name",t.target.value)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",required:!0,onChange:function(t){e.handleChange("password",t.target.value)}}),r.a.createElement("input",{type:"password",name:"confrimPassword",placeholder:"confirm password",required:!0,onChange:function(t){e.handleChange("confirmPassword",t.target.value)}}),r.a.createElement("button",{className:"login-btn",onClick:this.handleSignup},"Create"))}}]),n}(a.Component),T=Object(m.b)((function(e){return{}}))(U),P=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.isLoggedIn;return r.a.createElement("div",{className:"home"},!0===e?r.a.createElement(y,null):r.a.createElement(I,null))}}]),n}(a.Component),k=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch((function(e){var t=h();fetch(t).then((function(e){return e.json()})).then((function(t){console.log("student data",t),t.success&&e({type:"UPDATE_STUDENT",students:t.students})}))}));this.props.auth;var e=localStorage.getItem("token");if(e){var t=N()(e);console.log("user",t),this.props.dispatch(function(e){return{type:"AUTHENTICATE_USER",user:e}}({email:t.email,_id:t._id,name:t.name}))}}},{key:"render",value:function(){var e=this;console.log("props",this.props);var t=this.props.auth,n=(t.user,t.isLoggedIn);t.inProgress,t.error;return r.a.createElement(d.a,null,r.a.createElement(O,null),r.a.createElement(L.d,null,r.a.createElement(L.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(P,Object.assign({},e,{isLoggedIn:n}))}}),r.a.createElement(L.b,{path:"/signup",render:function(t){return r.a.createElement(T,Object.assign({},t,{auth:e.props.auth}))}})))}}]),n}(r.a.Component);var A=Object(m.b)((function(e){return{students:e.students,auth:e.auth}}))(k),R=n(13),D=n(28);var G=n(6),q={user:{},error:null,isLoggedIn:!1,inProgress:!1};var H=Object(R.c)({students:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_STUDENT":return t.students;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_AUTH":return Object(G.a)(Object(G.a)({},e),{},{error:null});case"USER_LOGIN_START":return Object(G.a)(Object(G.a)({},e),{},{inProgress:!0});case"USER_LOGIN_SUCCESS":return Object(G.a)(Object(G.a)({},e),{},{isLoggedIn:!0,inProgress:!1});case"USER_LOGIN_FAILED":case"SIGN_UP_SUCCESS":return Object(G.a)(Object(G.a)({},e),{},{error:t.message});case"AUTHENTICATE_USER":return Object(G.a)(Object(G.a)({},e),{},{user:t.user,isLoggedIn:!0,inProgress:!1});case"LOG_OUT":return Object(G.a)(Object(G.a)({},e),{},{user:{},error:null,isLoggedIn:!1,inProgress:!1});default:return e}}}),x=Object(R.d)(H,Object(R.a)(D.a));c.a.render(r.a.createElement(m.a,{store:x},r.a.createElement(A,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.3d6fdeb7.chunk.js.map